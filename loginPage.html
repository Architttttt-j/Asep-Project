<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style1.css">
    <title>Login</title>
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-auth.js"></script>
</head>
<body>
  <div class="first">
    <div class="login-box">
        <h1 class="login-header">Login</h1>
        <form id="loginForm">
            <input type="email" id="email" placeholder="Email" required />
            <input type="password" id="password" placeholder="Password" required />
            <button type="button" id="loginButton">Login</button>
            <button type="button" id="registerButton">Register</button>
        </form>
        <div class="input-submit">
            <div id="googleButton"></div>
        </div>
    </div>
  </div>

  <div id="greetSection" style="display:none; text-align:center; margin-top:20px;">
      <h1 id="greeting"></h1>
      <button id="logoutButton">Logout</button>
  </div>

  <script>
      // Firebase configuration
      const firebaseConfig = {
          apiKey: "YOUR_API_KEY",
          authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
          projectId: "YOUR_PROJECT_ID",
          storageBucket: "YOUR_PROJECT_ID.appspot.com",
          messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
          appId: "YOUR_APP_ID"
      };

      // Initialize Firebase
      const app = firebase.initializeApp(firebaseConfig);
      const auth = firebase.getAuth();

      // Handle Email/Password Login
      document.getElementById('loginButton').addEventListener('click', () => {
          const email = document.getElementById('email').value;
          const password = document.getElementById('password').value;

          firebase.signInWithEmailAndPassword(auth, email, password)
              .then((userCredential) => {
                  const user = userCredential.user;
                  showGreeting(user.email);
              })
              .catch((error) => {
                  alert(error.message);
              });
      });

      // Handle Email/Password Registration
      document.getElementById('registerButton').addEventListener('click', () => {
          const email = document.getElementById('email').value;
          const password = document.getElementById('password').value;

          firebase.createUserWithEmailAndPassword(auth, email, password)
              .then((userCredential) => {
                  alert('Registration successful! Please log in.');
              })
              .catch((error) => {
                  alert(error.message);
              });
      });

      // Handle Google Login
      const provider = new firebase.GoogleAuthProvider();
      const googleButton = document.getElementById('googleButton');

      googleButton.addEventListener('click', () => {
          firebase.signInWithPopup(auth, provider)
              .then((result) => {
                  const user = result.user;
                  showGreeting(user.displayName || user.email);
              })
              .catch((error) => {
                  alert(error.message);
              });
      });

      // Handle Logout
      document.getElementById('logoutButton').addEventListener('click', () => {
          firebase.signOut(auth).then(() => {
              document.querySelector('.first').style.display = 'block';
              document.getElementById('greetSection').style.display = 'none';
          });
      });

      // Show Greeting
      function showGreeting(name) {
          document.querySelector('.first').style.display = 'none';
          const greetSection = document.getElementById('greetSection');
          greetSection.style.display = 'block';
          document.getElementById('greeting').textContent = `Hello, ${name}!`;
      }
  </script>
</body>
</html>

